pm.test("Status 200", () => pm.response.to.have.status(200));
pm.test("Response is JSON", () => pm.response.to.be.json);

data = pm.response.json();

// Checking the structure is standart
pm.test("Response contains meta and results", () => {
  pm.expect(data).to.have.property("meta");
  pm.expect(data).to.have.property("results");
});

// Checking that results really contains 'headache'
pm.test("At least one reaction contains 'headache'", () => {
  const reactions = data.results.flatMap(r => 
    (r.patient?.reaction || []).map(obj => obj.reactionmeddrapt.toLowerCase())
  );
  pm.expect(reactions.some(r => r.includes("headache"))).to.be.true;
});